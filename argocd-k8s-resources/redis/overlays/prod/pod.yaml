apiVersion: v1
kind: Pod
metadata:
  name: test
  annotations:
    argocd.argoproj.io/sync-wave: "10"
spec:
  containers:
  - name: test
    image: python:3.14-alpine
    env:
    - name: TZ
      value: Europe/Brussels
    - name: REDIS_PASSWORD
      valueFrom:
        secretKeyRef:
          name: my-redis
          key: redis-password
    command:
    - sh
    - -c
    - echo 'Install Python dependencies:' && pip install redis && python /app/main.py
    volumeMounts:
    - name: script-volume
      mountPath: /app
    imagePullPolicy: IfNotPresent
  volumes:
  - name: script-volume
    configMap:
      name: redis-python-script
